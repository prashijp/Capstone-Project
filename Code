
# Load data to R studio
data_dir <- "/Users/jeevarehakrishnaraj/Desktop/Springboard/Capstone Project/Capstone" 
twitter_airline <- read.csv(file.path(data_dir,"tweets.csv"),header = TRUE)


# Replace twitter handle with blank 
twitter_airline$text <- gsub("@VirginAmerica","",gsub("@AmericanAir","",gsub("@JetBlue ","",gsub("@SouthwestAir","",gsub("@united","",gsub("@USAirways","",twitter_airline$text))))))

# Convert the table into dataframe 
checkk <- as.data.frame(do.call(rbind,twitter_airline))

# Build a corpus, and specify the source to be character vectors
tweets_corpus <- Corpus(VectorSource(checkk$text))

# Convert the corpus to lowercase 
tweets_corpus <- tm_map(tweets_corpus,content_transformer(tolower))

# Remove punctuations from corpus
 tweets_corpus <- tm_map(tweets_corpus,removePunctuation)

# Remove URLs
 removeURL <- function(x) gsub("http[^[:space:]]*", "", x)
 tweets_corpus <- tm_map(tweets_corpus,content_transformer(removeURL))

# Remove anything expect English and Space
remove_others <- function(x) gsub("[^[:alpha:][:space:]]*","",x)
 tweets_corpus <- tm_map(tweets_corpus,content_transformer(remove_others))

# Remove Stopwords
tweets_stopwords <- c(setdiff(stopwords('english'), c("r", "big")),"use", "see", "used", "via", "amp")
tweets_corpus <- tm_map(tweets_corpus,removeWords,tweets_stopwords)

# Remove extra whitespace
 tweets_corpus <- tm_map(tweets_corpus,stripWhitespace)

# Make a copy of the corpus
tweets_corpus_copy <- tweets_corpus
